<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Customers</title>
    <!-- Bootstrap - CSS CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body>
    <section class="px-5">
        <h2 class="text-center mt-4">Testing Thymeleaf Controller</h2>
        <hr>

        <div class="row mt-5">
            <div class="col-md-5">
                <div class="card p-3">
                    <div class="card-body">
                        <h3 class="text-center mb-3">Add Customer</h3>
                        <!-- FLASH MESSAGE START -->
                        <div th:if="${msg}">
                            <div class="alert text-center alert-primary" role="alert" th:text="${msg}">
                            </div>
                        </div>
                        <!-- FLASH MESSAGE END -->
                        <form th:method="POST" th:action="@{/customers}" th:object="${customer}">
                            <div class="form-group mt-2">
                                <label for="name">Customer Name</label>
                                <input
                                        type="text"
                                        name="name"
                                        id="name"
                                        class="form-control"
                                        th:value="${customer.name}"
                                        placeholder="Enter Customer Name"
                                        th:classappend="${#fields.hasErrors('name') ? 'is-invalid' : ''}"
                                >
                                <div class="invalid-feedback" th:each="e : ${#fields.errors('name')}" th:text="${e}">

                                </div>
                            </div>
                            <div class="form-group mt-2">
                                <label for="number">Customer Number</label>
                                <input
                                        type="text"
                                        name="number"
                                        id="number"
                                        class="form-control"
                                        th:value="${customer.number}"
                                        placeholder="Enter Customer Number"
                                        th:classappend="${#fields.hasErrors('number') ? 'is-invalid' : ''}"
                                >
                                <div class="invalid-feedback" th:each="e : ${#fields.errors('number')}" th:text="${e}">

                                </div>
                            </div>
                            <div class="form-group mt-2">
                                <label for="email">Customer Email</label>
                                <input
                                        type="email"
                                        name="email"
                                        id="email"
                                        class="form-control"
                                        th:value="${customer.email}"
                                        placeholder="Enter Customer Email"
                                        th:classappend="${#fields.hasErrors('email') ? 'is-invalid' : ''}"
                                >
                                <div class="invalid-feedback" th:each="e : ${#fields.errors('email')}" th:text="${e}">

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <input type="submit" value="Submit" class="btn btn-primary mt-3">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-7">
                <div class="card p-3">
                    <div class="card-body">
                        <h3 class="text-center mb-3">Customer List</h3>
                        <table class="table table-stripped">
                            <thead>
                                <tr>
                                    <th scope="col">SL No</th>
                                    <th scope="col">Customer Name</th>
                                    <th scope="col">Customer Number</th>
                                    <th scope="col">Customer email</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="customer, rowCount : ${customers}">
                                    <td th:text="${rowCount.count}"></td>
                                    <td th:text="${customer.name}"></td>
                                    <td th:text="${customer.number}"></td>
                                    <td th:text="${customer.email}"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Bootstrap - JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
</body>
</html>